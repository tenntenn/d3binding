var sb={BindingMaster:function(){var a=[];this.add=function(b){null===b||"undefined"===typeof b||0>a.indexOf(b)&&a.push(b)};this.notify=function(b,d){a.filter(function(b){var a=!1;Object.keys(b.inputs).forEach(function(e){b.inputs.hasOwnProperty(e)&&b.inputs[e]===d&&(a=!0)});return a});a.forEach(function(d){d.notify(b)})};this.remove=function(b){b=a.lastIndexOf(b);0<=b&&a.splice(b,1)}},Binding:function(a,b,d,c){this.inputs=b;this.outputs=d;this.compute=c;this.bind=function(){a.add(this);return this};
this.unbind=function(){a.remove(this);return this};this.notify=function(a){var e=c(b);Object.keys(e).forEach(function(b){var c=d[b];d.hasOwnProperty(b)&&"function"===typeof c&&c.notify(a,e[b])});return this}},Observable:function(a,b){var d=function(a){void 0!==a&&d.notify([],a);return b};d.notify=function(c,g){0>c.lastIndexOf(d)&&(b=g,a.notify(c.concat(d),d))};d.prototype=sb.Observable;this.property=d}};
(function(){var a=new sb.BindingMaster;sb.binding=function(){var b,d,c=function(){var a={};Object.keys(d).forEach(function(c){Object.keys(b).forEach(function(e){e!==c&&b[e]()!==d[c]()&&(a[c]=b[e]())})});return a},g,e=[];for(arg in arguments)arguments[arg].prototype===sb.Observable&&e.push(arguments[arg]);e.length===arguments.length?(b={},e.forEach(function(a,d){b["observable"+d]=a}),d=b):1==arguments.length?(b=arguments[0],d=arguments[0]):2>=arguments.length?"function"===typeof arguments[1]?(g=arguments[1],
arguments[0].prototype===sb.Observable?(d=b={observable:arguments[0]},c=function(b){g(b.observable);return{}}):(b=arguments[0],d=arguments[0],c=arguments[1])):(b=arguments[0],d=arguments[1]):2<arguments.length&&(b=arguments[0],d=arguments[1],c=arguments[2]);return new sb.Binding(a,b,d,c)};sb.observable=function(b){return(new sb.Observable(a,b)).property}})();var d3binding={};d3binding.expandable=function(a){"function"!==typeof a&&(a=function(){});var b=function(){a.apply(b,arguments)};b.expand=function(d){var c=a;a=function(){c.apply(b,arguments);d.apply(b,arguments)};return b};return b};d3binding.binding=function(){var a=d3binding.expandable(function(){});a.isTransition=!1;a.transition=function(){if(!a.isTransition){var b=d3binding.expandable(a);for(key in a)a.hasOwnProperty(key)&&(b[key]=a[key]);b.isTransition=!0;return b}return a};var b=function(b,c,g,e){b.expand(function(a){a[e](c,function(a){var i=d3.select(this),f=g;if("function"===typeof f&&(f=f(a),f.prototype===sb.Observable)){var h=f;sb.binding(h,function(){if(b.isTransition)if(null!==c)i.transition()[e](c,h());else i.transition()[e](h());
else if(null!==c)i[e](c,h());else i[e](h())}).bind();f=h()}return f})});return a};a.attr=function(a,c){return b(this,a,c,"attr")};a.style=function(a,c){return b(this,a,c,"style")};a.classed=function(a,c){return b(this,a,c,"classed")};a.text=function(a){return b(this,null,a,"text")};a.html=function(a){return b(this,null,a,"classed")};return a};
