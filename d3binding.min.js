var sb={BindingMaster:function(){var a=[];this.add=function(b){null===b||"undefined"===typeof b||0>a.indexOf(b)&&a.push(b)};this.notify=function(b,c){a.filter(function(b){var a=!1;Object.keys(b.inputs).forEach(function(e){b.inputs.hasOwnProperty(e)&&b.inputs[e]===c&&(a=!0)});return a});a.forEach(function(c){c.notify(b)})};this.remove=function(b){b=a.lastIndexOf(b);0<=b&&a.splice(b,1)}},Binding:function(a,b,c,d){this.inputs=b;this.outputs=c;this.compute=d;this.bind=function(){a.add(this);return this};
this.unbind=function(){a.remove(this);return this};this.notify=function(a){var e=d(b);Object.keys(e).forEach(function(b){var d=c[b];c.hasOwnProperty(b)&&"function"===typeof d&&d.notify(a,e[b])});return this}},Observable:function(a,b){var c=function(a){void 0!==a&&c.notify([],a);return b};c.notify=function(d,g){0>d.lastIndexOf(c)&&(b=g,a.notify(d.concat(c),c))};c.prototype=sb.Observable;this.property=c}};
(function(){var a=new sb.BindingMaster;sb.binding=function(){var b,c,d=function(){var a={};Object.keys(c).forEach(function(d){Object.keys(b).forEach(function(e){e!==d&&b[e]()!==c[d]()&&(a[d]=b[e]())})});return a},g,e=[];for(arg in arguments)arguments[arg].prototype===sb.Observable&&e.push(arguments[arg]);e.length===arguments.length?(b={},e.forEach(function(a,c){b["observable"+c]=a}),c=b):1==arguments.length?(b=arguments[0],c=arguments[0]):2>=arguments.length?"function"===typeof arguments[1]?(g=arguments[1],
arguments[0].prototype===sb.Observable?(c=b={observable:arguments[0]},d=function(b){g(b.observable);return{}}):(b=arguments[0],c=arguments[0],d=arguments[1])):(b=arguments[0],c=arguments[1]):2<arguments.length&&(b=arguments[0],c=arguments[1],d=arguments[2]);return new sb.Binding(a,b,c,d)};sb.observable=function(b){return(new sb.Observable(a,b)).property}})();var d3binding={};d3binding.expandable=function(a){"function"!==typeof a&&(a=function(){});var b=function(){a.apply(b,arguments)};b.expand=function(c){var d=a;a=function(){d.apply(b,arguments);c.apply(b,arguments)};return b};return b};d3binding.binding=function(){var a=d3binding.expandable(function(){});a.isTransition=!1;a.transition=function(){if(!a.isTransition){var b=d3binding.expandable(a);for(key in a)a.hasOwnProperty(key)&&(b[key]=a[key]);b.isTransition=!0;return b}return a};var b=function(b,a,g,e){b.expand(function(j){j[e](a,function(j){var i=d3.select(this),f=g;if("function"===typeof f&&(f=f(j),f.prototype===sb.Observable)){var h=f;sb.binding(h,function(){if(b.isTransition)if(null!==a)i.transition()[e](a,h());else i.transition()[e](h());
else if(null!==a)i[e](a,h());else i[e](h())}).bind();f=h()}return f})});return b};a.attr=function(a,d){return b(this,a,d,"attr")};a.style=function(a,d){return b(this,a,d,"style")};a.classed=function(a,d){return b(this,a,d,"classed")};a.text=function(a){return b(this,null,a,"text")};a.html=function(a){return b(this,null,a,"classed")};return a};
