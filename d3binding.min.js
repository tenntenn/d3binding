var sb={BindingMaster:function(){var b=[];this.add=function(a){null===a||"undefined"===typeof a||0>b.indexOf(a)&&b.push(a)};this.notify=function(a,c){b.filter(function(a){var b=!1;Object.keys(a.inputs).forEach(function(e){a.inputs.hasOwnProperty(e)&&a.inputs[e]===c&&(b=!0)});return b});b.forEach(function(c){c.notify(a)})};this.remove=function(a){a=b.lastIndexOf(a);0<=a&&b.splice(a,1)}},Binding:function(b,a,c,d){this.inputs=a;this.outputs=c;this.compute=d;this.bind=function(){b.add(this);return this};
this.unbind=function(){b.remove(this);return this};this.notify=function(b){var e=d(a);Object.keys(e).forEach(function(a){var d=c[a];c.hasOwnProperty(a)&&"function"===typeof d&&d.notify(b,e[a])});return this}},Observable:function(b,a){var c=function(b){void 0!==b&&c.notify([],b);return a};c.notify=function(d,g){0>d.lastIndexOf(c)&&(a=g,b.notify(d.concat(c),c))};c.prototype=sb.Observable;this.property=c}};
(function(){var b=new sb.BindingMaster;sb.binding=function(){var a,c,d=function(){var b={};Object.keys(c).forEach(function(d){Object.keys(a).forEach(function(e){e!==d&&a[e]()!==c[d]()&&(b[d]=a[e]())})});return b},g,e=[];for(arg in arguments)arguments[arg].prototype===sb.Observable&&e.push(arguments[arg]);e.length===arguments.length?(a={},e.forEach(function(c,b){a["observable"+b]=c}),c=a):1==arguments.length?(a=arguments[0],c=arguments[0]):2>=arguments.length?"function"===typeof arguments[1]?(g=arguments[1],
arguments[0].prototype===sb.Observable?(c=a={observable:arguments[0]},d=function(a){g(a.observable);return{}}):(a=arguments[0],c=arguments[0],d=arguments[1])):(a=arguments[0],c=arguments[1]):2<arguments.length&&(a=arguments[0],c=arguments[1],d=arguments[2]);return new sb.Binding(b,a,c,d)};sb.observable=function(a){return(new sb.Observable(b,a)).property}})();var d3binding={};d3binding.expandable=function(){var b=[],a=function(){var c=arguments;b.forEach(function(b){b.apply(a,c)})};for(arg in arguments)"function"===typeof arg&&(Object.keys(arg).forEach(function(c){arg.hasownproperty(c)&&(a[c]=arg[c])}),b.push(arg));a.expand=function(c){return"function"===typeof c?(newThat=d3binding.expandable.apply(this,b.concat(c)),Object.keys(a).forEach(function(c){a.hasownproperty(c)&&(newThat[c]=a[c])}),newThat):a};return a};d3binding.binding=function(){var b=d3binding.expandable();b.isTransition=!1;b.transition=function(){if(!b.isTransition){var a=d3binding.expandable(b);a.isTransition=!0;return a}return b};var a=function(a,b,g,e){a.expand(function(j){j[e](b,function(j){var i=d3.select(this),f=g;if("function"===typeof f&&(f=f(j),f.prototype===sb.Observable)){var h=f;sb.binding(h,function(){if(a.isTransition)if(null!==b)i.transition()[e](b,h());else i.transition()[e](h());else if(null!==b)i[e](b,h());else i[e](h())}).bind();
f=h()}return f})});return a};b.attr=function(b,d){return a(this,b,d,"attr")};b.style=function(b,d){return a(this,b,d,"style")};b.classed=function(b,d){return a(this,b,d,"classed")};b.text=function(b){return a(this,null,b,"text")};b.html=function(b){return a(this,null,b,"classed")};return b};
