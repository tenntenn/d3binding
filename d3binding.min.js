var sb={BindingMaster:function(){var c=[];this.add=function(a){null===a||"undefined"===typeof a||0>c.indexOf(a)&&c.push(a)};this.notify=function(a,b){c.filter(function(a){var c=!1;Object.keys(a.inputs).forEach(function(e){a.inputs.hasOwnProperty(e)&&a.inputs[e]===b&&(c=!0)});return c});c.forEach(function(b){b.notify(a)})};this.remove=function(a){a=c.lastIndexOf(a);0<=a&&c.splice(a,1)}},Binding:function(c,a,b,d){this.inputs=a;this.outputs=b;this.compute=d;this.bind=function(){c.add(this);return this};
this.unbind=function(){c.remove(this);return this};this.notify=function(c){var e=d(a);Object.keys(e).forEach(function(a){var d=b[a];b.hasOwnProperty(a)&&"function"===typeof d&&d.notify(c,e[a])});return this}},Observable:function(c,a){var b=function(c){void 0!==c&&b.notify([],c);return a};b.notify=function(d,f){0>d.lastIndexOf(b)&&(a=f,c.notify(d.concat(b),b))};b.prototype=sb.Observable;this.property=b}};
(function(){var c=new sb.BindingMaster;sb.binding=function(){var a,b,d=function(){var c={};Object.keys(b).forEach(function(d){Object.keys(a).forEach(function(e){e!==d&&a[e]()!==b[d]()&&(c[d]=a[e]())})});return c},f,e=[];for(arg in arguments)arguments[arg].prototype===sb.Observable&&e.push(arguments[arg]);e.length===arguments.length?(a={},e.forEach(function(b,c){a["observable"+c]=b}),b=a):1==arguments.length?(a=arguments[0],b=arguments[0]):2>=arguments.length?"function"===typeof arguments[1]?(f=arguments[1],
arguments[0].prototype===sb.Observable?(b=a={observable:arguments[0]},d=function(a){f(a.observable);return{}}):(a=arguments[0],b=arguments[0],d=arguments[1])):(a=arguments[0],b=arguments[1]):2<arguments.length&&(a=arguments[0],b=arguments[1],d=arguments[2]);return new sb.Binding(c,a,b,d)};sb.observable=function(a){return(new sb.Observable(c,a)).property}})();
var d3binding={expandable:function(){var c=function(){var a=[];for(i in arguments)arguments.hasOwnProperty(i)&&a.push(arguments[i]);c.funcs.forEach(function(d){d.apply(c,a)})};c.funcs=[];var a=arguments;for(i in a)"function"===typeof a[i]&&(Object.keys(a[i]).forEach(function(b){a[i].hasOwnProperty(b)&&(c[b]=a[i][b])}),c.funcs.push(a[i]));c.expand=function(a){"function"===typeof a&&c.funcs.push(a);return c};return c}};
(function(){d3binding.binding=function(){var a=d3binding.expandable();a.isTransition=!1;a.transition=function(){if(!a.isTransition&&a.expand){var b=d3binding.binding();b.expand(a.funcs);b.isTransition=!0;return b}return a};a.attr=function(b,d){return c(a,b,d,"attr")};a.style=function(b,d){return c(a,b,d,"style")};a.classed=function(b,d){return c(a,b,d,"classed")};a.text=function(b){return c(a,null,b,"text")};a.html=function(b){return c(a,null,b,"classed")};return a};var c=function(a,b,c,f){return a.expand(function(e){e[f](b,
function(e){var j=d3.select(this),g=c;if("function"===typeof g&&(g=g(e),g.prototype===sb.Observable)){var h=g;sb.binding(h,function(){if(a.isTransition)if(null!==b)j.transition()[f](b,h());else j.transition()[f](h());else if(null!==b)j[f](b,h());else j[f](h())}).bind();g=h()}return g})})}})();
