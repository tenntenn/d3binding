var sb={BindingMaster:function(){var c=[];this.add=function(a){null===a||"undefined"===typeof a||0>c.indexOf(a)&&c.push(a)};this.notify=function(a,b){c.filter(function(a){var c=!1;Object.keys(a.inputs).forEach(function(e){a.inputs.hasOwnProperty(e)&&a.inputs[e]===b&&(c=!0)});return c});c.forEach(function(b){b.notify(a)})};this.remove=function(a){a=c.lastIndexOf(a);0<=a&&c.splice(a,1)}},Binding:function(c,a,b,d){this.inputs=a;this.outputs=b;this.compute=d;this.bind=function(){c.add(this);return this};
this.unbind=function(){c.remove(this);return this};this.notify=function(c){var e=d(a);Object.keys(e).forEach(function(a){var d=b[a];b.hasOwnProperty(a)&&"function"===typeof d&&d.notify(c,e[a])});return this}},Observable:function(c,a){var b=function(d){void 0!==d&&b.notify([],d);return a};b.notify=function(d,h){0>d.lastIndexOf(b)&&(a=h,c.notify(d.concat(b),b))};b.prototype=sb.Observable;this.property=b}};
(function(){var c=new sb.BindingMaster;sb.binding=function(){var a,b,d=function(){var d={};Object.keys(b).forEach(function(c){Object.keys(a).forEach(function(e){e!==c&&a[e]()!==b[c]()&&(d[c]=a[e]())})});return d},h,e=[];for(arg in arguments)arguments[arg].prototype===sb.Observable&&e.push(arguments[arg]);e.length===arguments.length?(a={},e.forEach(function(b,d){a["observable"+d]=b}),b=a):1==arguments.length?(a=arguments[0],b=arguments[0]):2>=arguments.length?"function"===typeof arguments[1]?(h=arguments[1],
arguments[0].prototype===sb.Observable?(b=a={observable:arguments[0]},d=function(a){h(a.observable);return{}}):(a=arguments[0],b=arguments[0],d=arguments[1])):(a=arguments[0],b=arguments[1]):2<arguments.length&&(a=arguments[0],b=arguments[1],d=arguments[2]);return new sb.Binding(c,a,b,d)};sb.observable=function(a){return(new sb.Observable(c,a)).property}})();var d3binding={};d3binding.expandable=function(){var c=[],a=function(){var b=arguments;c.forEach(function(c){c.apply(a,b)})},b=arguments;for(i in b)"function"===typeof b[i]&&(Object.keys(b[i]).forEach(function(c){b[i].hasownproperty(c)&&(a[c]=b[i][c])}),c.push(b[i]));a.expand=function(b){return"function"===typeof b?(newThat=d3binding.expandable.apply(this,c.concat(b)),Object.keys(a).forEach(function(b){a.hasownproperty(b)&&(newThat[b]=a[b])}),newThat):a};return a};d3binding.binding=function(){var c=d3binding.expandable();c.isTransition=!1;c.transition=function(){if(!c.isTransition){var b=d3binding.expandable(c);b.isTransition=!0;return b}return c};var a=function(b,a,c,e){b.expand(function(k){k[e](a,function(k){var j=d3.select(this),f=c;if("function"===typeof f&&(f=f(k),f.prototype===sb.Observable)){var g=f;sb.binding(g,function(){if(b.isTransition)if(null!==a)j.transition()[e](a,g());else j.transition()[e](g());else if(null!==a)j[e](a,g());else j[e](g())}).bind();
f=g()}return f})});return b};c.attr=function(b,c){return a(this,b,c,"attr")};c.style=function(b,c){return a(this,b,c,"style")};c.classed=function(b,c){return a(this,b,c,"classed")};c.text=function(b){return a(this,null,b,"text")};c.html=function(b){return a(this,null,b,"classed")};return c};
